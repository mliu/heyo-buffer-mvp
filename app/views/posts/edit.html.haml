=form_for @post do |f|
  %div{style: "width: 500px;"}
    =f.label :content
    =f.text_field :content, class: "form-control"
    %br
    =f.label :page_token, "Post to"
    %br
    ="Currently posting to " + @post.page_name
    %br
    =f.select :page_token, @page_names
    %br
    %br
    =f.label :photo
    =f.file_field :photo
    / Ajax preview
    / #image_view
    /   =image_tag @post.photo.url
    %br
    =f.label :buffer_time
    #datetimepicker.input-group
      %input.form-control{id: "post_buffer_time", name: "post[buffer_time]", "data-format" => "MM/dd/yyyy HH:mm:ss PP", :type => "text", value: @post.buffer_time}
      %span.input-group-addon
        %i{"data-time-icon" => "fa fa-clock-o", "data-date-icon" => "fa fa-calendar"}
    =f.hidden_field :parse_time
    %br
    =f.submit

:javascript
  $(function() {
    $('#datetimepicker').datetimepicker({
      language: 'en',
      pick12HourFormat: true,
      startDate: new Date(#{@startDate.year}, #{@startDate.month - 1}, #{@startDate.day})
    });

    $('#post_buffer_time').on('input', function(e){
      document.getElementById('post_parse_time').value = e.localDate.toString();
    });
  });